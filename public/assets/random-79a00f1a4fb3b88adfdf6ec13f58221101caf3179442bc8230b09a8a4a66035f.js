function Change(){(r=jQuery.parseJSON(localStorage.getItem("round")))!=$("#round").text()&&$("#round").text(r);for(var e=$("#kanji_only").is(":checked"),t=jQuery.parseJSON(localStorage.getItem("temp")),a=Math.floor(Math.random()*t.length+0);e&&""==t[a][0];){if(t.splice(a,1),a=Math.floor(Math.random()*t.length+0),UpdatePercent(t.length),0==t.length){var r=jQuery.parseJSON(localStorage.getItem("round"));r+=1,localStorage.setItem("round",r),t=jQuery.parseJSON(localStorage.getItem("data"))}localStorage.setItem("temp",JSON.stringify(t))}if(""==t[a][0]?$("#kanji").text(t[a][1]):$("#kanji").text(t[a][0]),$("#hira").text(t[a][1]),$("#mean").text(t[a][2]),t.splice(a,1),UpdatePercent(t.length),0==t.length){r=jQuery.parseJSON(localStorage.getItem("round"));r+=1,localStorage.setItem("round",r),t=jQuery.parseJSON(localStorage.getItem("data"))}localStorage.setItem("temp",JSON.stringify(t))}function UpdatePercent(e){var t=jQuery.parseJSON(localStorage.getItem("data")).length,a=100*(t-e)/t;$(".progress-bar").width(a+"%")}function RemoveWord(){var e=jQuery.parseJSON(localStorage.getItem("data")),t=jQuery.parseJSON(localStorage.getItem("temp")),a=($("#kanji").text(),$("#hira").text()),r=$("#mean").text();for(i=0;i<e.length;i++)e[i][1]==a&&e[i][2]==r&&e.splice(i,1);UpdatePercent(t.length),localStorage.setItem("data",JSON.stringify(e))}$(document).ready(function(){var e=$("#data").text();localStorage.setItem("ori_data",e),localStorage.setItem("data",e),localStorage.setItem("temp",e),localStorage.setItem("round",1),Change(),$(".btn.btn-secondary.active").trigger("click")}),$("#remove").click(function(){RemoveWord(),$("#random-box").trigger("click")}),$("#random-box").click(function(){if($("#kanji").is(":visible")&&$("#hira").is(":visible")&&$("#mean").is(":visible")){$("#kanji").hide(),$("#hira").hide(),$("#mean").hide();var e=$(".btn.btn-secondary.active").children().attr("name");$("#"+e).show()}Change()}),$("#info-button").click(function(){$("#kanji").show(),$("#hira").show(),$("#mean").show()}),$(".btn.btn-secondary").click(function(){setTimeout(function(){$("#kanji").hide(),$("#hira").hide(),$("#mean").hide();var e=$(".btn.btn-secondary.active").children().attr("name");$("#"+e).show()},300)});